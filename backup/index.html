<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.123.6"><meta name=description content="Panduan Ubuntu Server 20.04 LTS"><meta name=author content="Musa Amin"><link rel="shortcut icon" href=https://raw.githubusercontent.com/musaamin/ubuntu2004/main/static/images/favicon.png type=image/x-icon><title>Backup Data - Panduan Ubuntu Server 20.04 LTS</title>
<link href=/ubuntu2004/css/nucleus.css?1709175307 rel=stylesheet><link href=/ubuntu2004/css/fontawesome-all.min.css?1709175307 rel=stylesheet><link href=/ubuntu2004/css/hybrid.css?1709175307 rel=stylesheet><link href=/ubuntu2004/css/featherlight.min.css?1709175307 rel=stylesheet><link href=/ubuntu2004/css/perfect-scrollbar.min.css?1709175307 rel=stylesheet><link href=/ubuntu2004/css/auto-complete.css?1709175307 rel=stylesheet><link href=/ubuntu2004/css/atom-one-dark-reasonable.css?1709175307 rel=stylesheet><link href=/ubuntu2004/css/theme.css?1709175307 rel=stylesheet><link href=/ubuntu2004/css/tabs.css?1709175307 rel=stylesheet><link href=/ubuntu2004/css/hugo-theme.css?1709175307 rel=stylesheet><script src=/ubuntu2004/js/jquery-3.3.1.min.js?1709175307></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/ubuntu2004/backup/><nav id=sidebar><div id=header-wrapper><div id=header><a href=https://musaamin.github.io/ubuntu2004/><img src=https://raw.githubusercontent.com/musaamin/ubuntu2004/main/static/images/logo.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/ubuntu2004/js/lunr.min.js?1709175307></script><script type=text/javascript src=/ubuntu2004/js/auto-complete.js?1709175307></script><script type=text/javascript>var baseurl="https://musaamin.github.io/ubuntu2004/"</script><script type=text/javascript src=/ubuntu2004/js/search.js?1709175307></script></div><div class=highlightable><ul class=topics><li data-nav-id=/ubuntu2004/vps/ title="Virtual Private Server" class=dd-item><a href=/ubuntu2004/vps/>1. Virtual Private Server</a></li><li data-nav-id=/ubuntu2004/ssh/ title="Secure Shell (SSH)" class=dd-item><a href=/ubuntu2004/ssh/>2. Secure Shell (SSH)</a></li><li data-nav-id=/ubuntu2004/filetransfer/ title="File Transfer" class=dd-item><a href=/ubuntu2004/filetransfer/>3. File Transfer</a></li><li data-nav-id=/ubuntu2004/timezone/ title="Time Zone" class=dd-item><a href=/ubuntu2004/timezone/>4. Time Zone</a></li><li data-nav-id=/ubuntu2004/mariadb/ title="MariaDB Database" class=dd-item><a href=/ubuntu2004/mariadb/>5. MariaDB Database</a></li><li data-nav-id=/ubuntu2004/apache/ title="Apache Web Server" class=dd-item><a href=/ubuntu2004/apache/>6. Apache Web Server</a><ul><li data-nav-id=/ubuntu2004/apache/php-apache/ title="PHP dengan Apache" class=dd-item><a href=/ubuntu2004/apache/php-apache/>PHP dengan Apache</a></li><li data-nav-id=/ubuntu2004/apache/phpmyadmin-apache/ title="phpMyAdmin dengan Apache" class=dd-item><a href=/ubuntu2004/apache/phpmyadmin-apache/>phpMyAdmin dengan Apache</a></li><li data-nav-id=/ubuntu2004/apache/letsencrypt-apache/ title="Let's Encrypt untuk Apache" class=dd-item><a href=/ubuntu2004/apache/letsencrypt-apache/>Let's Encrypt untuk Apache</a></li><li data-nav-id=/ubuntu2004/apache/wordpress-apache/ title="WordPress dengan Apache" class=dd-item><a href=/ubuntu2004/apache/wordpress-apache/>WordPress dengan Apache</a></li></ul></li><li data-nav-id=/ubuntu2004/nginx/ title="Nginx Web Server" class=dd-item><a href=/ubuntu2004/nginx/>7. Nginx Web Server</a><ul><li data-nav-id=/ubuntu2004/nginx/php-nginx/ title="PHP dengan Nginx" class=dd-item><a href=/ubuntu2004/nginx/php-nginx/>PHP dengan Nginx</a></li><li data-nav-id=/ubuntu2004/nginx/phpmyadmin-nginx/ title="phpMyAdmin dengan Nginx" class=dd-item><a href=/ubuntu2004/nginx/phpmyadmin-nginx/>phpMyAdmin dengan Nginx</a></li><li data-nav-id=/ubuntu2004/nginx/letsencrypt-nginx/ title="Let's Encrypt untuk Nginx" class=dd-item><a href=/ubuntu2004/nginx/letsencrypt-nginx/>Let's Encrypt untuk Nginx</a></li><li data-nav-id=/ubuntu2004/nginx/wordpress-nginx/ title="WordPress dengan Nginx" class=dd-item><a href=/ubuntu2004/nginx/wordpress-nginx/>WordPress dengan Nginx</a></li></ul></li><li data-nav-id=/ubuntu2004/composer/ title=Composer class=dd-item><a href=/ubuntu2004/composer/>8. Composer</a></li><li data-nav-id=/ubuntu2004/firewall/ title=Firewall class=dd-item><a href=/ubuntu2004/firewall/>9. Firewall</a></li><li data-nav-id=/ubuntu2004/monitoring/ title="System Monitoring" class=dd-item><a href=/ubuntu2004/monitoring/>10. System Monitoring</a></li><li data-nav-id=/ubuntu2004/log/ title="Log File" class=dd-item><a href=/ubuntu2004/log/>11. Log File</a></li><li data-nav-id=/ubuntu2004/backup/ title="Backup Data" class="dd-item
active"><a href=/ubuntu2004/backup/>12. Backup Data</a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://musaamin.web.id/blog><i class='fas fa-link'></i> Blog</a></li><li><a class=padding href=https://www.youtube.com/musaamin><i class='fas fa-link'></i> YouTube</a></li><li><a class=padding href=https://www.twitter.com/musaamin><i class='fas fa-link'></i> Twitter</a></li><li><a class=padding href=https://www.facebook.com/musaaminwebid><i class='fas fa-link'></i> Facebook</a></li><li><a class=padding href=https://github.com/musaamin><i class='fas fa-link'></i> GitHub</a></li><li><a class=padding href=https://saweria.co/musaamin><i class='fas fa-link'></i> Donasi</a></li></ul></section><section id=footer><center><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></center></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/ubuntu2004/>Home</a> > Backup Data</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#bash-script-backup>Bash Script Backup</a></li><li><a href=#cron--job-scheduler>cron – Job Scheduler</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Backup Data</h1><p>Melakukan backup data yang sudah berjalan di server sangat penting, karena hasil backup dapat dikembalikan lagi jika terjadi insiden keamanan yang tidak diinginkan. Contoh insiden yang bisa saja terjadi, website menjadi korban hacking, website terkena malware, atau bahkan kesalahan dari pemilik website sendiri (tidak sengaja menghapus file atau database). Data yang dibackup adalah file website beserta databasenya. Backup data dibuat dalam bash script kemudian dikombinasikan dengan cron untuk penjadwalan backup.</p><h2 id=bash-script-backup>Bash Script Backup</h2><p>Langkah pertama yang harus dilakukan yaitu membuat bash script yang berisi perintah backup. Bash script adalah script program yang berisi perintah-perintah bash.</p><p>Membuat direktori /backup.</p><pre tabindex=0><code>sudo mkdir -p /backup/domain.com/www
sudo mkdir /backup/domain.com/database
</code></pre><p>Membuat file bash script dengan nano.</p><pre tabindex=0><code>sudo nano /backup/backup.sh
</code></pre><p>Masukkan bash script di bawah ini.</p><pre tabindex=0><code>#!/bin/bash

rsync -avz /var/www/domain.com/ /backup/domain.com/www --delete
mysqldump -uwordpress -prahasia wordpress | gzip &gt; /backup/domain.com/database/wordpress-$(date +%d%m%Y).sql.gz
</code></pre><p>Bash script di atas melakukan sinkronisasi direktori dengan perintah rsync. Kemudian melakukan dump database dan dikompresi agar file dump lebih kecil, selain itu nama file dump dibuat per hari.</p><p>Beri atribut execution dan uji menjalankan bash script.</p><pre tabindex=0><code>cd /backup
sudo chmod 700 backup.sh
sudo ./backup.sh
</code></pre><p>Setelah menjalankan bash script, periksa isi dari direktori backup, apakah bash script berhasil melakukan sinkronisasi direktori dan dump database.</p><pre tabindex=0><code>ls -l /backup/domain.com/www/
ls -l /backup/domain.com/database
</code></pre><h2 id=cron--job-scheduler>cron – Job Scheduler</h2><p>cron adalah utility untuk penjadwalan tugas, perintah, atau script berdasarkan waktu dalam sistem operasi. Bash script backup yang sudah dibuat dijadwalkan pada jam tertentu dengan cron agar bisa berjalan secara otomatis tanpa harus dijalankan lagi secara manual.</p><p>Membuat cron job.</p><pre tabindex=0><code>sudo crontab -e
</code></pre><p>Tambahkan cron job di bawah ini.</p><pre tabindex=0><code>0 0 * * * /bin/bash /backup/backup.sh
</code></pre><p>Cron job di atas akan menjalankan bash script backup.sh pada jam 00.00 setiap hari.</p><p>Format penulisan waktu di cron.</p><pre tabindex=0><code>*     *     *     *     *  
-     -     -     -     -
|     |     |     |     |
|     |     |     |     +----- hari (0 - 6) (0=Minggu)
|     |     |     +------- bulan (1 - 12)
|     |     +--------- tanggal (1 - 31)
|     +----------- jam (0 - 23)
+------------- menit (0 – 59)
</code></pre><p>Contoh penulisan waktu di cron.</p><pre tabindex=0><code>* * * * * &lt;command&gt; #setiap menit
30 * * * * &lt;command&gt; #setiap 30 menit
45 6 * * * &lt;command&gt; #setiap jam 6.45
45 18 * * * &lt;command&gt; #setiap jam 18.45
00 1 * * 0 &lt;command&gt; #setiap jam 1 hari Minggu
00 1 * * 7 &lt;command&gt; #setiap jam 1 hari Minggu
00 1 * * Sun &lt;command&gt; #setiap jam 1 hari Minggu
30 8 1 * * &lt;command&gt; #setiap jam 8.30 tanggal 1 setiap bulan
00 0-23/2 02 07 * &lt;command&gt; #setiap jam pada tanggal 2 Juli
</code></pre><p>Untuk memudahkan dalam penulisan waktu di cron dapat menggunakan crontab editor di <a href=https://crontab.guru>crontab.guru</a></p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/ubuntu2004/log/ title="Log File"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/ubuntu2004/vps/ title="Virtual Private Server" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/ubuntu2004/js/clipboard.min.js?1709175307></script><script src=/ubuntu2004/js/perfect-scrollbar.min.js?1709175307></script><script src=/ubuntu2004/js/perfect-scrollbar.jquery.min.js?1709175307></script><script src=/ubuntu2004/js/jquery.sticky.js?1709175307></script><script src=/ubuntu2004/js/featherlight.min.js?1709175307></script><script src=/ubuntu2004/js/highlight.pack.js?1709175307></script><script>hljs.initHighlightingOnLoad()</script><script src=/ubuntu2004/js/modernizr.custom-3.6.0.js?1709175307></script><script src=/ubuntu2004/js/learn.js?1709175307></script><script src=/ubuntu2004/js/hugo-learn.js?1709175307></script><script src=/ubuntu2004/mermaid/mermaid.js?1709175307></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>